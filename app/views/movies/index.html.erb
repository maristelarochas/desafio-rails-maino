<div class="mb-8 flex justify-between items-center">
  <h1 class="text-3xl font-bold text-gray-900">Filmes</h1>
  <% if user_signed_in? %>
    <%= link_to "Adicionar Filme", new_movie_path, class: "bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700" %>
  <% end %>
</div>

<% if @movies.any? %>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
    <% @movies.each do |movie| %>
      <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition">
        <!-- Poster -->
        <% if movie.poster.attached? %>
          <%= image_tag movie.poster, class: "w-full h-48 object-cover" %>
        <% else %>
          <div class="w-full h-48 bg-gray-200 flex items-center justify-center">
            <svg class="w-16 h-16 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"></path>
            </svg>
          </div>
        <% end %>

        <!-- Card -->
        <div class="p-6">
            <h2 class="text-xl font-bold text-gray-900 mb-2">
            <%= link_to movie.title, movie, class: "hover:text-indigo-600" %>
          </h2>

          <div class="text-sm text-gray-600 mb-4 space-y-1">
            <% if movie.director.present? %>
              <p><strong>Diretor:</strong> <%= movie.director %></p>
            <% end %>
            <% if movie.release_year.present? %>
              <p><strong>Ano:</strong> <%= movie.release_year %></p>
            <% end %>
            <% if movie.duration.present? %>
              <p><strong>Duração:</strong> <%= movie.duration %> min</p>
            <% end %>
          </div>

          <% if movie.synopsis.present? %>
            <p class="text-gray-700 mb-4">
              <%= truncate(movie.synopsis, length: 150) %>
            </p>
          <% end %>

          <%= link_to "Ver detalhes", movie, class: "text-indigo-600 hover:text-indigo-800 font-medium" %>
        </div>
      </div>
    <% end %>
  </div>

  <!-- Paginação -->
  <%= paginate @movies %>
<% else %>
  <div class="text-center py-12 bg-white rounded-lg shadow">
    <svg class="w-16 h-16 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"></path>
    </svg>
    <p class="text-gray-600 text-lg mb-4">Nenhum filme cadastrado ainda.</p>
    <% if user_signed_in? %>
      <%= link_to "Adicionar primeiro filme", new_movie_path, class: "bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 inline-block" %>
    <% end %>
  </div>
<% end %>
